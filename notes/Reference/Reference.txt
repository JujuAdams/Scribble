`scribble()` is the heart of Scribble and is responsible for managing the underlying systems.

When you call `scribble()`, the function searches Scribble's internal cache and will return the text element that matches the string you gave the function (and also matches the unique ID too, if you specified one). If the cache doesn't contain a matching string then a new text element is created and returned instead.

**N.B. That even small changes in a string may cause a new text element to be generated.** Scribble is pretty fast, but you don't want to use it for text that changes rapidly (e.g. health points, money, or score) as this will cause Scribble to do a lot of work, potentially slowing down your game.

Each text element can be altered by calling methods, a new feature in [GMS2.3.0](https://www.yoyogames.com/blog/549/gamemaker-studio-2-3-new-gml-features). Most methods return the text element itself. This allows you to chain methods together, achieving a [fluent interface](https://en.wikipedia.org/wiki/Fluent_interface). Some methods are marked as "regenerator methods". Setting new, different values for a piece of text using a regenerator method will cause Scribble to regenerate the underlying vertex buffers. For the sake of performance, avoid frequently changing values for regenerator methods as this will cause performance problems.

Don't worry about clearing up after yourself when you draw text - Scribble automatically manages memory for you. If you *do* want to manually control how memory is used, please use the [`.free()`](scribble()-Methods#flush) method and [`scribble_flush_everything()`](Functions-(Miscellaneous)#scribble_flush_everything).

&nbsp;

### `scribble([string], [uniqueID])`

**Returns:** A text element that contains the string (a struce, an instance of `__scribble_class_element`)

|Name        |Datatype      |Purpose               |
|------------|--------------|----------------------|
|`[string]`  |string        |String to draw        |
|`[uniqueID]`|string or real|ID to reference a specific unique occurrence of a text element. Defaults to [`SCRIBBLE_DEFAULT_OCCURRENCE_NAME`](Functions-(Configuration)#__scribble_config_macros)|

If no string is specified (i.e. the function used with arguments), this function will return a **unique** text element that contains no text data (even if no unique ID is given). The text in any text element, including empty ones, can be overwritten using the [`.overwrite()`](scribble()-Methods#overwritestring-regenerator) method.

Scribble allows for many kinds of inline formatting tags. Please read the [Text Formatting](Text-Formatting) article for more information.

**N.B.** Scribble text elements have **no publicly accessible variables**. Do not directly read or write variables, use the setter and getter methods provided instead.

&nbsp;

## Methods

Text element methods are broken down into several categories. There's a lot here; feel free to swing by the [Discord server](https://discord.gg/8krYCqr) if you'd like some pointers on what to use and when. As noted above, **be careful when adjusting regenerator methods** as it's easy to cause to performance problems.
1. [**Basics**](scribble()-Methods#basics)
    - [`.draw(x, y)`](scribble()-Methods#drawx-y)
    - [`.starting_format(fontName, colour)` *regenerator*](scribble()-Methods#starting_formatfontname-colour-regenerator)
    - [`.align(halign, valign)` *regenerator*](scribble()-Methods#alignhalign-valign-regenerator)
    - [`.blend(colour, alpha)`](scribble()-Methods#blendcolour-alpha)
    - [`.overwrite(string)` *regenerator*](scribble()-Methods#overwritestring-regenerator)
2. [**Shape, Wrapping, and Positioning**](scribble()-Methods#shape-wrapping-and-positioning)
    - [`.transform(xscale, yscale, angle)`](scribble()-Methods#transformxscale-yscale-angle)
    - [`.origin(x, y)`](scribble()-Methods#originx-y)
    - [`.wrap(maxWidth, [maxHeight], [characterWrap])` *regenerator*](scribble()-Methods#wrapmaxwidth-maxheight-characterwrap-regenerator)
    - [`.fit_to_box(maxWidth, maxHeight, [characterWrap])` *regenerator*](scribble()-Methods#fit_to_boxmaxwidth-maxheight-characterwrap-regenerator)
    - [`.line_height(min, max)` *regenerator*](scribble()-Methods#line_heightmin-max-regenerator)
    - [`.bezier(x1, y1, x2, y2, x3, y3, x4, y4)` *regenerator*](scribble()-Methods#bezierx1-y1-x2-y2-x3-y3-x4-y4-regenerator)
3. [**Pages**](scribble()-Methods#pages)
    - [`.page(page)`](scribble()-Methods#pagepage)
    - [`.get_page()`](scribble()-Methods#get_page)
    - [`.get_pages()`](scribble()-Methods#get_pages)
4. [**Typewriter**](scribble()-Methods#typewriter)
    - [`.typewriter_off()`](scribble()-Methods#typewriter_off)
    - [`.typewriter_reset()`](scribble()-Methods#typewriter_reset)
    - [`.typewriter_in(speed, smoothness)`](scribble()-Methods#typewriter_inspeed-smoothness)
    - [`.typewriter_out(speed, smoothness, [backwards])`](scribble()-Methods#typewriter_outspeed-smoothness-backwards)
    - [`.typewriter_ease(easeMethod, dx, dy, xscale, yscale, rotation, alphaDuration)`](scribble()-Methods#typewriter_easeeasemethod-dx-dy-xscale-yscale-rotation-alphaduration)
    - [`.get_typewriter_state()`](scribble()-Methods#get_typewriter_state)
    - [`.typewriter_pause()`](scribble()-Methods#typewriter_pause)
    - [`.typewriter_unpause()`](scribble()-Methods#typewriter_unpause)
    - [`.get_typewriter_paused()`](scribble()-Methods#get_typewriter_paused)
    - [`.typewriter_sound(soundArray, overlap, pitchMin, pitchMax)`](scribble()-Methods#typewriter_soundsoundarray-overlap-pitchmin-pitchmax)
    - [`.typewriter_sound_per_char(soundArray, pitchMin, pitchMax)`](scribble()-Methods#typewriter_sound_per_charsoundarray-pitchmin-pitchmax)
    - [`.typewriter_function(function)`](scribble()-Methods#typewriter_functionfunction)
5. [**Getters**](scribble()-Methods#getters)
    - [`.get_bbox([x], [y], [leftPad], [topPad], [rightPad], [bottomPad])`](scribble()-Methods#get_bboxx-y-leftpad-toppad-rightpad-bottompad)
    - [`.get_width()`](scribble()-Methods#get_width)
    - [`.get_height()`](scribble()-Methods#get_height)
    - [`.get_wrapped()`](scribble()-Methods#get_wrapped)
    - [`.get_line_count([page])`](scribble()-Methods#get_line_countpage)
6. [**Animation**](scribble()-Methods#animation)
    - [`.animation_tick_speed(tickSpeed)`](scribble()-Methods#animation_tick_speedtickspeed)
    - [`.animation_sync(sourceElement)`](scribble()-Methods#animation_syncsourceelement)
    - [`.animation_wave(size, frequency, speed)`](scribble()-Methods#animation_wavesize-frequency-speed)
    - [`.animation_shake(size, speed)`](scribble()-Methods#animation_shakesize-speed)
    - [`.animation_rainbow(weight, speed)`](scribble()-Methods#animation_rainbowweight-speed)
    - [`.animation_wobble(angle, frequency)`](scribble()-Methods#animation_wobbleangle-frequency)
    - [`.animation_pulse(scale, speed)`](scribble()-Methods#animation_pulsescale-speed)
    - [`.animation_wheel(size, frequency, speed)`](scribble()-Methods#animation_wheelsize-frequency-speed)
    - [`.animation_cycle(speed, saturation, value)`](scribble()-Methods#animation_cyclespeed-saturation-value)
    - [`.animation_jitter(minScale, maxScale, speed)`](scribble()-Methods#animation_jitterminscale-maxscale-speed)
    - [`.animation_blink(onDuration, offDuration, timeOffset)`](scribble()-Methods#animation_blinkonduration-offduration-timeoffset)
7. [**MSDF**](scribble()-Methods#msdf)
    - [`.msdf_shadow(colour, alpha, xOffset, yOffset)`](scribble()-Methods#msdf_shadowcolour-alpha-xoffset-yoffset)
    - [`.msdf_border(colour, thickness)`](scribble()-Methods#msdf_bordercolour-thickness)
    - [`.msdf_feather(thickness)`](scribble()-Methods#msdf_featherthickness)
8. [**Cache Management**](scribble()-Methods#cache-management)
    - [`.build(freeze)`](scribble()-Methods#buildfreeze)
    - [`.flush()`](scribble()-Methods#flush)
9. [**Miscellaneous**](scribble()-Methods#miscellaneous)
    - [`.template(function)`](scribble()-Methods#templatefunction)
    - [`.fog(colour, alpha)`](scribble()-Methods#fogcolour-alpha)
    - [`.ignore_command_tags(state)` *regenerator*](scribble()-Methods#ignore_command_tagsstate-regenerator)

&nbsp;

&nbsp;

&nbsp;

## Basics

[Previous section](scribble()-Methods#methods)  |  [Next section](scribble()-Methods#shape-wrapping-and-positioning)

&nbsp;

### `.draw(x, y)`

**Returns**: The text element

|Name|Datatype|Purpose                          |
|----|--------|---------------------------------|
|`x` |real    |x position in the room to draw at|
|`y` |real    |y position in the room to draw at|

&nbsp;

### `.starting_format(fontName, colour)` *regenerator*

**Returns**: The text element

|Name      |Datatype|Purpose                                                                                                                                 |
|----------|--------|----------------------------------------------------------------------------------------------------------------------------------------|
|`fontName`|string  |Name of the starting font, as a string. This is the font that is set when `[/]` or `[/font]` is used in a string                        |
|`colour`  |integer |Starting colour in the standard GameMaker 24-bit BGR format. This is the colour that is set when `[/]` or `[/color]` is used in a string|

&nbsp;

### `.align(halign, valign)` *regenerator*

**Returns**: The text element

|Name    |Datatype                                                                                                                  |Purpose                                                                                               |
|--------|--------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------|
|`halign`|[halign constant](https://docs2.yoyogames.com/source/_build/3_scripting/4_gml_reference/drawing/text/draw_set_halign.html)|Starting horizontal alignment of **each line** of text. Accepts `fa_left`, `fa_right`, and `fa_center`|
|`valign`|[valign constant](https://docs2.yoyogames.com/source/_build/3_scripting/4_gml_reference/drawing/text/draw_set_valign.html)|Starting vertical alignment of the **entire textbox**. Accepts `fa_top`, `fa_bottom`, and `fa_middle` |

&nbsp;

### `.blend(colour, alpha)`

**Returns**: The text element

|Name    |Datatype|Purpose                                                                         |
|--------|--------|--------------------------------------------------------------------------------|
|`colour`|integer |Blend colour used when drawing text, applied multiplicatively                   |
|`alpha` |real    |Alpha used when drawing text, 0 being fully transparent and 1 being fully opaque|

The blend colour/alpha is applied at the end of the drawing pipeline. This is a little different to the interaction between [`draw_set_color()`](https://docs2.yoyogames.com/source/_build/3_scripting/4_gml_reference/drawing/colour/draw_set_colour.html) and [`draw_text()` functions](https://docs2.yoyogames.com/source/_build/3_scripting/4_gml_reference/drawing/text/). Scribble's blend colour is instead similar to [`draw_sprite_ext()`](https://docs2.yoyogames.com/source/_build/3_scripting/4_gml_reference/drawing/sprites_and_tiles/draw_sprite_ext.html)'s behaviour: The blend colour/alpha is applied multiplicatively with the source colour, in this case the source colour is whatever colour has been set using formatting tags in the input text string.

&nbsp;

### `.overwrite(string)` *regenerator*

**Returns**: The text element

|Name    |Datatype|Purpose                                     |
|--------|--------|--------------------------------------------|
|`string`|string  |New string to display using the text element|

This function will replace the string in an existing text element whilst maintaining any animation, typewriter, or page state. This function may cause a recaching of the underlying text model so should be used sparingly.

&nbsp;

&nbsp;

&nbsp;

## Shape, Wrapping, and Positioning

[Previous section](scribble()-Methods#basics)  |  [Next section](scribble()-Methods#pages)

&nbsp;

### `.transform(xscale, yscale, angle)`

**Returns**: The text element

|Name    |Datatype|Purpose                           |
|--------|--------|----------------------------------|
|`xscale`|real    |x scale of the text element       |
|`yscale`|real    |y scale of the text element       |
|`angle` |real    |rotation angle of the text element|

The transform operates relative to the origin of the text element i.e. rotation will happen using the origin as the centre of rotation. [`.origin()`](scribble()-Methods#originx-y) can be used to draw text offset from the origin.

&nbsp;

### `.origin(x, y)`

**Returns**: The text element

|Name|Datatype|Purpose|
|----|--------|-------|
|`x` |real    |       |
|`y` |real    |       |

&nbsp;

### `.wrap(maxWidth, [maxHeight], [characterWrap])` *regenerator*

**Returns**: The text element

|Name             |Datatype|Purpose                                                                                                                                         |
|-----------------|--------|------------------------------------------------------------------------------------------------------------------------------------------------|
|`maxWidth`       |integer |Maximum width for the whole textbox. Use a negative number (the default) for no limit                                                           |
|`[maxHeight]`    |integer |Maximum height for the whole textbox. Use a negative number (the default) for no limit                                                          |
|`[characterWrap]`|boolean |Whether to wrap text per character (rather than per word). Defaults to `false`. This is useful for tight textboxes and some East Asian languages|

Scribble's text wrapping operates in a very similar way to GameMaker's native [`draw_text_ext()`](https://docs2.yoyogames.com/source/_build/3_scripting/4_gml_reference/drawing/text/draw_text_ext.html). If text exceeds the horizontal maximum width then text will be pushed onto the next line. If text exceeds the maximum height of the textbox then a new page will be created (see [`.page()`](scribble()-Methods#pagepage) and [`.get_page()`](scribble()-Methods#get_page)). Very long sequences of glyphs without spaces will be split across multiple lines.

&nbsp;

### `.fit_to_box(maxWidth, maxHeight, [characterWrap])` *regenerator*

**Returns**: The text element

|Name             |Datatype|Purpose                                                                                                                                              |
|-----------------|--------|-----------------------------------------------------------------------------------------------------------------------------------------------------|
|`maxWidth`       |integer |Maximum width for the whole textbox                                                                                                                  |
|`maxHeight`      |integer |Maximum height for the whole textbox                                                                                                                 |
|`[characterWrap]`|boolean |Whether to wrap text per character (rather than per word). Defaults to `false`. This is useful for very tight textboxes and some East Asian languages|

Fits text to a box by wrapping and scaling, taking up as much space as possible without starting a new page. The macro `SCRIBBLE_FIT_TO_BOX_ITERATIONS` controls how many iterations to perform (higher is slower but more accurate).

**N.B. This function is very slow and should be used sparingly. It is recommended you manually cache text elements that use `.fit_to_box()`.**

&nbsp;

### `.line_height(min, max)` *regenerator*

**Returns**: The text element

|Name |Datatype|Purpose                                                                                                                               |
|-----|--------|--------------------------------------------------------------------------------------------------------------------------------------|
|`min`|integer |Minimum line height for each line of text. Use a negative number (the default) for the height of a space character of the default font|
|`max`|integer |Maximum line height for each line of text. Use a negative number (the default) for no limit                                           |

&nbsp;

### `.bezier(x1, y1, x2, y2, x3, y3, x4, y4)` *regenerator*

**Returns**: The text element

|Name|Datatype|Purpose                             |
|----|--------|------------------------------------|
|`x1`|real    |Parameter for the cubic Bézier curve|
|`y1`|real    |"                                   |
|`x2`|real    |"                                   |
|`y2`|real    |"                                   |
|`x3`|real    |"                                   |
|`y3`|real    |"                                   |
|`x4`|real    |"                                   |
|`y4`|real    |"                                   |

This function defines a [cubic Bézier curve](https://en.wikipedia.org/wiki/B%C3%A9zier_curve) to shape text to. The four x/y coordinate pairs provide a smooth curve that Scribble uses as a guide to position and rotate glyphs.

**The curve is positioned relative to the coordinate specified when calling** [`.draw()`](scribble()-Methods#drawx-y) **so that the first Bézier coordinate is at the draw coordinate**. This enables you to move a curve without re-adjusting the values set in `.bezier()` (which would regenerate the text element, likely causing performance problems).

If used in conjunction with [`.wrap()`](scribble()-Methods#wrapmaxwidth-maxheight-characterwrap-regenerator), the total length of the curve is used to wrap text horizontally and overrides the value specified in [`.wrap()`](scribble()-Methods#wrapmaxwidth-maxheight-characterwrap-regenerator). `.bezier()` will not work with `[fa_right]` or `[fa_center]` alignment. Instead, you should use `[pin_right]` and `[pin_center]`.

This function can also be executed with zero arguments (e.g. `scribble("text").bezier()`) to turn off the Bézier curve for this text element.

&nbsp;

&nbsp;

&nbsp;

## Pages

[Previous section](scribble()-Methods#shape-wrapping-and-positioning)  |  [Next section](scribble()-Methods#typewriter)

&nbsp;

### `.page(page)`

**Returns**: The text element

|Name  |Datatype|Purpose                                          |
|------|--------|-------------------------------------------------|
|`page`|integer |Page to display, starting at 0 for the first page|

This function is intended for use with [`.get_page()`](scribble()-Methods#get_page) and [`get_pages()`](scribble()-Methods#get_pages).

Please note that changing the page will reset any typewriter animations i.e. those started by [`.typewriter_in()`](scribble()-Methods#typewriter_inspeed-smoothness) and [`typewriter_out()`](scribble()-Methods#typewriter_outspeed-smoothness).

&nbsp;

### `.get_page()`

**Returns:** Integer, page that the text element is currently on, starting at `0` for the first page

|Name|Datatype|Purpose|
|----|--------|-------|
|None|        |       |

&nbsp;

### `.get_pages()`

**Returns:** Integer, total number of pages for the text element

|Name|Datatype|Purpose|
|----|--------|-------|
|None|        |       |

&nbsp;

&nbsp;

&nbsp;

## Typewriter

[Previous section](scribble()-Methods#pages)  |  [Next section](scribble()-Methods#getters)

&nbsp;

### `.typewriter_off()`

**Returns**: The text element

|Name|Datatype|Purpose|
|----|--------|-------|
|None|        |       |

Turns off the typewriter effect and displays all text. [Typewriter events](Functions-(Miscellaneous)#scribble_typewriter_add_eventname-function) will **not** be executed.

&nbsp;

### `.typewriter_reset()`

**Returns**: The text element

|Name|Datatype|Purpose|
|----|--------|-------|
|None|        |       |

Resets the position of the typewriter animation for the current page.

&nbsp;

### `.typewriter_in(speed, smoothness)`

**Returns**: The text element

|Name        |Datatype|Purpose                                                                                                                        |
|------------|--------|-------------------------------------------------------------------------------------------------------------------------------|
|`speed`     |real    |Amount of text to reveal per tick (1 tick is usually 1 frame). This is character or lines depending on the method defined above|
|`smoothness`|real    |How much text is visible during the fade. Higher numbers will allow more text to be visible as it fades in                     |

The `smoothness` argument offers some customisation for how text fades in. A high value will cause text to be smoothly faded in whereas a smoothness of `0` will cause text to instantly pop onto the screen. For advanced users, custom shader code can be easily combined with the `smoothness` value to animate text in unique ways as it fades in.

[Events](Functions-(Miscellaneous)#scribble_typewriter_add_eventname-function) (in-line scripts) will be executed as text fades in. This is a powerful tool and can be used to achieve many things, including triggering sound effects, changing character portraits, starting movement of instances, starting weather effects, giving the player items, and so on.

&nbsp;

### `.typewriter_out(speed, smoothness, [backwards])`

**Returns**: The text element

|Name         |Datatype|Purpose                                                                                                                        |
|-------------|--------|-------------------------------------------------------------------------------------------------------------------------------|
|`speed`      |real    |Amount of text to reveal per tick (1 tick is usually 1 frame). This is character or lines depending on the method defined above|
|`smoothness` |real    |How much text is visible during the fade. Higher numbers will allow more text to be visible as it fades out                    |
|`[backwards]`|boolean |Whether to animate the typewriter backwards. Defaults to `false`                                                               |

The `smoothness` argument offers some customisation for how text fades out. A high value will cause text to be smoothly faded out whereas a smoothness of `0` will cause text to instantly pop onto the screen. For advanced users, custom shader code can be easily combined with the `smoothness` value to animate text in unique ways as it fades out.

[Events](Functions-(Miscellaneous)#scribble_typewriter_add_eventname-function) will **not** be executed as text fades out.

&nbsp;

### `.typewriter_ease(easeMethod, dx, dy, xscale, yscale, rotation, alphaDuration)`

**Returns**: The text element

|Name           |Datatype|Purpose                                                           |
|---------------|--------|------------------------------------------------------------------|
|`easeMethod`   |integer |A member of the `SCRIBBLE_EASE` enum. See below                   |
|`dx`           |real    |Starting x-coordinate of the glyph, relative to its final position|
|`dy`           |real    |Starting y-coordinate of the glyph, relative to its final position|
|`xscale`       |real    |Starting x-scale of the glyph, relative to its final scale        |
|`yscale`       |real    |Starting y-scale of the glyph, relative to its final scale        |
|`rotation`     |real    |Starting rotation of the glyph, relative to its final rotation    |
|`alphaDuration`|real    |Value from `0` to `1` (inclusive). See below                      |

The `alphaDuration` argument controls how glyphs fade in using alpha blending. A value of `0` will cause the glyph to "pop" into view with no fading, a value of `1` will cause the glyph to fade into view smoothly such that it reaches 100% alpha at the very end of the typewriter animation for the glyph.

**N.B.** Alpha fading is always linear and is not affected by the easing method chosen.

Scribble offers the following easing functions for typewriter behaviour. These are implemented using methods found in the widely used [easings.net](https://easings.net/) library.

|`SCRIBBLE_EASE` members|
|-----------------------|
|`.NONE`                |
|`.LINEAR`              |
|`.QUAD`                |
|`.CUBIC`               |
|`.QUART`               |
|`.QUINT`               |
|`.SINE`                |
|`.EXPO`                |
|`.CIRC`                |
|`.BACK`                |
|`.ELASTIC`             |
|`.BOUNCE`              |

&nbsp;

### `.get_typewriter_state()`

**Returns:** Real value from 0 to 2 (inclusive) that represents what proportion of text is visible

|Name|Datatype|Purpose|
|----|--------|-------|
|None|        |       |

The value returned by this function is as follows:

|Value         |Visibility                                                                                                      |
|--------------|----------------------------------------------------------------------------------------------------------------|
|`= 0`         |No text is visible                                                                                              |
|`> 0`<br>`< 1`|Text is fading in. This value is the proportion of text that is visible<br>e.g. `0.4` is 40% visibility         |
|`= 1`         |Text is fully visible and the fade in animation has finished                                                    |
|`> 1`<br>`< 2`|Text is fading out. 2 minus this value is the proportion of text that is visible<br>e.g. `1.6` is 40% visibility|
|`= 2`         |No text is visible and the fade out animation has finished                                                      |

If no typewriter animation has been started, this function will return `1`.

&nbsp;

### `.typewriter_pause()`

**Returns**: The text element

|Name|Datatype|Purpose|
|----|--------|-------|
|None|        |       |

Pauses the typewriter effect.

&nbsp;

### `.typewriter_unpause()`

**Returns**: The text element

|Name|Datatype|Purpose|
|----|--------|-------|
|None|        |       |

Unpauses the typewriter effect. This is helpful when combined with the `[pause]` [command tag](Text-Formatting) and [`.get_typewriter_paused()`](scribble()-Methods#get_typewriter_paused).

&nbsp;

### `.get_typewriter_paused()`

**Returns:** Boolean, whether the text element is currently paused due to encountering `[pause]` tag when typing out text

|Name|Datatype|Purpose|
|----|--------|-------|
|None|        |       |

&nbsp;

### `.typewriter_sound(soundArray, overlap, pitchMin, pitchMax)`

**Returns**: The text element

|Name        |Datatype                                                                                      |Purpose                                                                                                             |
|------------|----------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------|
|`soundArray`|array of [sounds](https://docs2.yoyogames.com/source/_build/2_interface/1_editors/sounds.html)|Array of audio assets that can be used for playback                                                                 |
|`overlap`   |real                                                                                          |Amount of overlap between sound effect playback, in milliseconds                                                    |
|`pitchMin`  |real                                                                                          |Minimum pitch to play a sound at. A value of `1.0` gives no change in pitch, a value of `0.5` halves the pitch etc. |
|`pitchMax`  |real                                                                                          |Maximum pitch to play a sound at. A value of `1.0` gives no change in pitch, a value of `2.0` doubles the pitch etc.|

It's quite common in games with typewriter-style text animations to have a "mumble" or "gibberish" sound effect that plays whilst text is being revealed. This function allows you to define an array of sound effects that will be randomly played as text is revealed. The pitch of these sounds can be randomly modulated as well by selecting `pitchMin` and `pitchMax` values.

Setting the `overlap` value to 0 will ensure that sound effects never overlap at all, which is generally what's desirable, but it can sound a bit stilted and unnatural. By setting the `overlap` argument to a number above 0, sound effects will be played with a little bit of overlap which improves the effect considerably. A value around 30ms usually sounds ok. The `overlap` argument can be set to a value less than 0 if you'd like more space between sound effects.

&nbsp;

### `.typewriter_sound_per_char(soundArray, pitchMin, pitchMax)`

**Returns**: The text element

|Name        |Datatype                                                                                      |Purpose                                                                                                             |
|------------|----------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------|
|`soundArray`|array of [sounds](https://docs2.yoyogames.com/source/_build/2_interface/1_editors/sounds.html)|Array of audio assets that can be used for playback                                                                 |
|`pitchMin`  |real                                                                                          |Minimum pitch to play a sound at. A value of `1.0` gives no change in pitch, a value of `0.5` halves the pitch etc. |
|`pitchMax`  |real                                                                                          |Maximum pitch to play a sound at. A value of `1.0` gives no change in pitch, a value of `2.0` doubles the pitch etc.|

It's quite common in games with typewriter-style text animations to have a sound effect that plays as text shows up. This function allows you to define an array of sound effects that will be randomly played as **each character** is revealed. The pitch of these sounds can be randomly modulated as well by selecting `pitchMin` and `pitchMax` values.

&nbsp;

### `.typewriter_function(function)`

**Returns**: The text element

|Name      |Datatype|Purpose|
|----------|--------|-------|
|`function`|function|       |

`.typewriter(function)` allows you to define a function that will be executed once per character as that character is revealed. The function is given two arguments: the text element that triggered the callback, and the position of the character that was just revealed.

This function is perhaps best used in conjunction with the [`SCRIBBLE_CREATE_CHARACTER_ARRAY`](Functions-(Configuration)#__scribble_config_macros) macro.

&nbsp;

&nbsp;

&nbsp;

## Getters

[Previous section](scribble()-Methods#typewriter)  |  [Next section](scribble()-Methods#animation)

&nbsp;

### `.get_bbox([x], [y], [leftPad], [topPad], [rightPad], [bottomPad])`

**Returns:** Struct containing the positions of the bounding box for a text element

|Name         |Datatype|Purpose                                                                                            |
|-------------|--------|---------------------------------------------------------------------------------------------------|
|`[x]`        |real    |x position in the room. Defaults to 0                                                              |
|`[y]`        |real    |y position in the room. Defaults to 0                                                              |
|`[leftPad]`  |real    |Extra space on the left-hand side of the textbox. Positive values create more space. Defaults to 0 |
|`[topPad]`   |real    |Extra space on the top of the textbox. Positive values create more space. Defaults to 0            |
|`[rightPad]` |real    |Extra space on the right-hand side of the textbox. Positive values create more space. Defaults to 0|
|`[bottomPad]`|real    |Extra space on the bottom of the textbox. Positive values create more space. Defaults to 0         |

The struct returned by `.get_bbox()` contains the following member variables:

|Variable        |Purpose                                |
|----------------|---------------------------------------|
|**Axis-aligned**|                                       |
|`left`          |Axis-aligned lefthand boundary         |
|`top`           |Axis-aligned top boundary              |
|`right`         |Axis-aligned righthand boundary        |
|`bottom`        |Axis-aligned bottom boundary           |
|`width`         |Axis-aligned width of the bounding box |
|`height`        |Axis-aligned height of the bounding box|
|**Oriented**    |                                       |
|`x0`            |x position of the top-left corner      |
|`y0`            |y position of the top-left corner      |
|`x1`            |x position of the top-right corner     |
|`y1`            |y position of the top-right corner     |
|`x2`            |x position of the bottom-left corner   |
|`y2`            |y position of the bottom-left corner   |
|`x3`            |x position of the bottom-right corner  |
|`y3`            |y position of the bottom-right corner  |

&nbsp;

### `.get_width()`

**Returns:** Real, width of the text element in pixels (ignoring rotation and scaling)

|Name|Datatype|Purpose|
|----|--------|-------|
|None|        |       |

&nbsp;

### `.get_height()`

**Returns:** Real, height of the text element in pixels (ignoring rotation and scaling)

|Name|Datatype|Purpose|
|----|--------|-------|
|None|        |       |

&nbsp;

### `.get_wrapped()`

**Returns:** Boolean, whether the text has wrapped onto a new line using the [`.wrap()` feature](scribble()-Methods#wrapmaxwidth-maxheight-characterwrap-regenerator)

|Name|Datatype|Purpose|
|----|--------|-------|
|None|        |       |

Will return `true` only if the [`.wrap()` feature](scribble()-Methods#wrapmaxwidth-maxheight-characterwrap-regenerator) is used. Manual newlines (`\n`) included in the input string will not cause this function to return `true`.

&nbsp;

### `.get_line_count([page])`

**Returns:** Integer, how many lines of text are on the given page

|Name    |Datatype|Purpose                                                                                  |
|--------|--------|-----------------------------------------------------------------------------------------|
|`[page]`|Integer |Page to retrieve the number of lines for. Defaults to the current page that's being shown|

&nbsp;

&nbsp;

&nbsp;

## Animation

[Previous section](scribble()-Methods#getters)  |  [Next section](scribble()-Methods#msdf)

&nbsp;

### `.animation_tick_speed(tickSpeed)`

**Returns**: The text element

|Name       |Datatype|Purpose                                                                                                       |
|-----------|--------|--------------------------------------------------------------------------------------------------------------|
|`tickSpeed`|real    |"Scaling factor" for animation ticks. A value of `2` doubles the speed, a value of `0.5` halves the speed etc.|

This function controls the animation speed of all animation effects. It, however, does **not** alter the speed of the typewriter.

&nbsp;

### `.animation_sync(sourceElement)`

**Returns**: The text element

|Name           |Datatype    |Purpose                                             |
|---------------|------------|----------------------------------------------------|
|`sourceElement`|text element|Source text element to copy animation state **from**|

Syncing a text element to another will overwrite the current values. Be careful how you sync your text elements! Animation state is updated when a text element is drawn so make sure to sync your text element once every frame/step before the source text element is drawn.

When copying the animation state, the animation time and the animation tick speed ([`.animation_tick_speed()`](https://github.com/JujuAdams/ScribbleNewDocs/wiki/scribble()-Methods#animation_tick_speedtickspeed)) will be copied. Animation appearance properties themselves won't be copied. To share animation behaviours between elements, please use templates ([`.template()`](scribble()-Methods#templatefunction)).

&nbsp;

### `.animation_wave(size, frequency, speed)`

**Returns**: The text element

|Name       |Datatype|Purpose                                                                                             |
|-----------|--------|----------------------------------------------------------------------------------------------------|
|`size`     |real    |Maximum pixel offset of the animation                                                               |
|`frequency`|real    |Frequency of the animation. Larger values will create more horizontally frequent "humps" in the text|
|`speed`    |real    |Speed of the animation                                                                              |

This function controls behaviour of the `[wave]` effect across all uses in the text element.

&nbsp;

### `.animation_shake(size, speed)`

**Returns**: The text element

|Name       |Datatype|Purpose                                                          |
|-----------|--------|-----------------------------------------------------------------|
|`size`     |real    |Maximum pixel offset of the animation                            |
|`speed`    |real    |Speed of the animation. Larger numbers cause text to shake faster|

This function controls behaviour of the `[shake]` effect across all uses in the text element.

&nbsp;

### `.animation_rainbow(weight, speed)`

**Returns**: The text element

|Name    |Datatype|Purpose                                                                                                                   |
|--------|--------|--------------------------------------------------------------------------------------------------------------------------|
|`weight`|real    |Blend weight of the rainbow colouring. A value of 0 will not apply the effect, a value of 1 will blend with 100% weighting|
|`speed` |real    |Cycling speed of the animation. Larger numbers scroll faster                                                              |

This function controls behaviour of the `[rainbow]` effect across all uses in the text element.

&nbsp;

### `.animation_wobble(angle, frequency)`

**Returns**: The text element

|Name       |Datatype|Purpose                                                              |
|-----------|--------|---------------------------------------------------------------------|
|`angle`    |real    |Maximum angular offset of the animation                              |
|`frequency`|real    |Speed of the animation. Larger numbers cause text to oscillate faster|

This function controls behaviour of the `[wobble]` effect across all uses in the text element.

&nbsp;

### `.animation_pulse(scale, speed)`

**Returns**: The text element

|Name   |Datatype|Purpose                                                                        |
|-------|--------|-------------------------------------------------------------------------------|
|`scale`|real    |Maximum scale of the animation                                                 |
|`speed`|real    |Speed of the animation. Larger values will cause text to shrink and grow faster|

This function controls behaviour of the `[pulse]` effect across all uses in the text element.

&nbsp;

### `.animation_wheel(size, frequency, speed)`

**Returns**: The text element

|Name       |Datatype|Purpose                                                                  |
|-----------|--------|-------------------------------------------------------------------------|
|`size`     |real    |Maximum pixel offset of the animation                                    |
|`frequency`|real    |Frequency of the animation. Larger values will create more chaotic motion|
|`speed`    |real    |Speed of the animation                                                   |

This function controls behaviour of the `[wheel]` effect across all uses in the text element.

&nbsp;

### `.animation_cycle(speed, saturation, value)`

**Returns**: The text element

|Name        |Datatype|Purpose                                                                                                                                                                                                                                                             |
|------------|--------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|`speed`     |real    |Speed of the animation. Larger values will cause the colour to cycle faster                                                                                                                                                                                         |
|`saturation`|integer |Saturation of colours generated by the animation. Values from 0 to 255 (inclusive) are accepted, much like GM's [`make_color_hsv()`](https://manual.yoyogames.com/#t=GameMaker_Language%2FGML_Reference%2FDrawing%2FColour_And_Alpha%2Fmake_colour_hsv.htm)         |
|`value`     |integer |Value ("lightness") of colours generated by the animation. Values from 0 to 255 (inclusive) are accepted, much like GM's [`make_color_hsv()`](https://manual.yoyogames.com/#t=GameMaker_Language%2FGML_Reference%2FDrawing%2FColour_And_Alpha%2Fmake_colour_hsv.htm)|

This function controls behaviour of the `[cycle]` effect across all uses in the text element.

&nbsp;

### `.animation_jitter(minScale, maxScale, speed)`

**Returns**: The text element

|Name      |Datatype|Purpose                                                          |
|----------|--------|-----------------------------------------------------------------|
|`minScale`|real    |Minimum scale offset of the animation                            |
|`maxScale`|real    |Maximum scale offset of the animation                            |
|`speed`   |real    |Speed of the animation. Larger numbers cause text to shake faster|

This function controls behaviour of the `[jitter]` effect across all uses in the text element.

&nbsp;

### `.animation_blink(onDuration, offDuration, timeOffset)`

**Returns**: The text element

|Name         |Datatype|Purpose                                         |
|-------------|--------|------------------------------------------------|
|`onDuration` |real    |Number of ticks that blinking text is shown for |
|`offDuration`|real    |Number of ticks that blinking text is hidden for|
|`timeOffset` |real    |Time offset for calculating the blink state     |

This function controls behaviour of the `[blink]` effect across all uses in the text element.

&nbsp;

&nbsp;

&nbsp;

## MSDF

[Previous section](scribble()-Methods#animation)  |  [Next section](scribble()-Methods#cache-management)

*MSDF fonts require special considerations. Please read [the MSDF article](MSDF-Fonts) for more information.*

&nbsp;

### `.msdf_shadow(colour, alpha, xoffset, yoffset)`

**Returns**: The text element

|Name     |Datatype|Purpose                                                                    |
|---------|--------|---------------------------------------------------------------------------|
|`colour` |integer |The colour of the shadow, as a standard GameMaker 24-bit BGR format        |
|`alpha`  |real    |Opacity of the shadow, `0.0` being transparent and `1.0` being fully opaque|
|`xoffset`|real    |x-coordinate of the shadow, relative to the parent glyph                     |
|`yoffset`|real    |y-coordinate of the shadow, relative to the parent glyph                     |

&nbsp;

### `.msdf_border(colour, thickness)`

**Returns**: The text element

|Name       |Datatype|Purpose                                                                |
|-----------|--------|-----------------------------------------------------------------------|
|`colour`   |integer |Colour of the glyph's border, as a standard GameMaker 24-bit BGR format|
|`thickness`|real    |Thickness of the border, in pixels                                     |

&nbsp;

### `.msdf_feather(thickness)`

**Returns**: The text element

|Name       |Datatype|Purpose                             |
|-----------|--------|------------------------------------|
|`thickness`|real    |Feather thickness, in pixels        |

This feature will normally not be needed and the feather thickness will default to `1.0`.

&nbsp;

&nbsp;

&nbsp;

## Cache Management

[Previous section](scribble()-Methods#msdf)  |  [Next section](scribble()-Methods#miscellaneous)

&nbsp;

### `.build(freeze)`

**Returns**: The text element

|Name    |Datatype|Purpose|
|--------|--------|-------|
|`freeze`|boolean |       |

&nbsp;

### `.flush()`

**Returns**: The text element

|Name|Datatype|Purpose|
|----|--------|-------|
|None|        |       |

&nbsp;

&nbsp;

&nbsp;

## Miscellaneous

[Previous section](scribble()-Methods#cache-management)

&nbsp;

### `.template(function)`

**Returns**: The text element

|Name      |Datatype                       |Purpose|
|----------|-------------------------------|-------|
|`function`|function, or array of functions|       |

&nbsp;

### `.fog(colour, alpha)`

**Returns**: The text element

|Name    |Datatype|Purpose                                                |
|--------|--------|-------------------------------------------------------|
|`colour`|integer |Fog colour, in the standard GameMaker 24-bit BGR format|
|`alpha` |real    |Blending factor for the fog, from 0 to 1               |

&nbsp;

### `.ignore_command_tags(state)` *regenerator*

**Returns**: The text element

|Name   |Datatype|Purpose|
|-------|--------|-------|
|`state`|boolean |       |